!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n="https://www.google.com/search?q=define+";var i={theme:{value:"auto"}};function r(e){var t={db:i,search:e};browser.tabs.query({currentWindow:!0,active:!0}).then(function(e){browser.tabs.sendMessage(e[0].id,t)})}function s(e){console.error(e)}function c(e){e=e||{},i=$.extend(i,e)}browser.runtime.onMessage.addListener(function(e){var t,o,n,i;localStorage.setItem("recentSearchText",e.searchText),t=e.searchText,o=r,n="https://googledictionaryapi.eu-gb.mybluemix.net/?define="+t,i={searchText:t,definitions:"",pronounciation:"",status:"",synonyms:""},$.when($.getJSON(n)).then(function(e){i.pronounciation=e.phonetic;var t="";if(e&&e.meaning){var o=e.meaning,n=1;for(var r in o){if(o.hasOwnProperty(r)){var s=o[r][0];console.log(s);var c=s.synonyms;c&&(t+=n+". ("+r+") "+c.join(", "),n!=Object.keys(o).length&&(t+="<br />"))}n++}i.status="success",i.definitions="",i.synonyms=function(e){return""===e?"No synonyms found":e}(t)}}).fail(function(){i.status="fail"}).always(function(){o(i)})}),browser.storage.onChanged.addListener(function(e,t){"sync"===t&&browser.storage.sync.get().then(c,s)}),browser.storage.sync.get().then(c,s),console.log("test");!function(){var e={text:"",region:{}},t=!1;$(document).dblclick(function(n){var c,h;window.getSelection?c=window.getSelection():document.getSelection?c=document.getSelection():document.selection&&(c=document.selection.createRange().text),h=document.getElementById("tooltipDictBox"),t=!(!h||!h.contains(n.target)),function(n){var c=n.toString().trim();if(0!==c.length&&!/\s+/.test(c)){e.region=n,e.text=c;var h,f,g,x,b,m,w,y=e.region,v=y.getRangeAt(0).getBoundingClientRect();h=$((w=o,DOMPurify.sanitize(w,{SAFE_FOR_JQUERY:!0,ADD_ATTR:["target"]}))),$("body").append(h),$("#tooltipDictBox").css(s),$("#tooltipTitleHolder").css(a),$("#searchTextTitle").css(l),$("#searchMoreLink").css(p),$("#searchDefinitions").css(d),$("#closeBtnEPD").css(u),$("#searchPronounciation").css("display","none"),$("#tooltipTitleHolder").css("display","none"),$("#searchMoreLink").css("display","none"),$("#searchTextTitle").css("display","none"),$("#searchDefinitions").html("Searching..."),$("#tooltipDictBox").show(),t||(b=$(window).width(),m=$(window).height(),f=h.height(),g=v.left+v.width+1+i,r+g>b-i&&(g=b-r-i),(x=v.top)+f>m&&(x-=f),g+=window.scrollX,x+=window.scrollY,$("#tooltipDictBox").css({top:x,left:g})),browser.runtime.sendMessage({searchText:c})}}(c)});var o='<div id="tooltipDictBox">            <div id="tooltipTitleHolder">                <p id="searchTextTitle"></p>                <span id="searchPronounciation"></span>                <button id="closeBtnEPD">x</button><br/>            </div>            <p id="searchDefinitions"></p>            <div id="tooltipDictBoxFooter">                <a href="" id="searchMoreLink" target="_blank">More</a>            </div>        </div>',i=10,r=350,s={boxShadow:"5px 5px 5px #888888",position:"absolute",zIndex:"999999",backgroundColor:"#feffce",padding:i+"px",font:"normal 14px/28px Arial",borderRadius:"0px 5px 5px 5px",maxWidth:r+"px",minWidth:"200px",minHeight:"60px"},c={dark:{backgroundColor:"#343a40",color:"white"},light:{backgroundColor:"#feffce",color:"black"}},a={paddingBottom:"12px"},l={font:"bold 14px/28px Arial",display:"inline"},d={font:"normal 14px/26px Arial"},u={color:"grey",cursor:"pointer",float:"right",borderRadius:"12px",height:"30px",width:"30px",font:"normal 13px/17px Arial",border:"none",margin:0,padding:"6px 12px",backgroundColor:"whitesmoke",textTransform:"lowercase"},p={float:"left",color:"#1a0dab",font:"normal 14px/28px Arial"},h={dark:{color:"lightblue"},light:{color:"#1a0dab"}};browser.runtime.onMessage.addListener(function(o){if(o.search.searchText===e.text){var s,a,l,d,u,p,f=e.region.getRangeAt(0).getBoundingClientRect();if(s=$("#tooltipDictBox"),o.db&&o.db.theme){var g=function(e){var t;return"auto"!==e.value?e.value:(t=(new Date).getHours())<6||t>20?"dark":"light"}(o.db.theme);$("#tooltipDictBox").css(c[g]),$("#searchDefinitions").css(c[g]),$("#searchTextTitle").css(c[g]),$("#searchPronounciation").css(c[g]),$("#searchMoreLink").css(h[g])}o.db&&o.db.searchEngineUrl&&o.db.searchEngineUrl,$("#tooltipTitleHolder").css("display",""),$("#searchPronounciation").css("display",""),$("#searchMoreLink").css("display",""),$("#searchTextTitle").css("display","inline"),$("#tooltipDictBox").show();var x,b=((x=o.search).googleQuery=n+x.searchText,"fail"===x.status?(x.definitions="No definition found",x.pronounciation="",x):x);$("#searchTextTitle").html(b.searchText),$("#searchPronounciation").html(b.pronounciation||""),$("#searchDefinitions").html(b.synonyms),$("#searchMoreLink").prop("href",b.googleQuery),t||(u=$(window).width(),p=$(window).height(),a=s.height(),l=f.left+f.width+1+i,r+l>u-i&&(l=u-r-i),(d=f.top)+a>p&&(d-=a),l+=window.scrollX,d+=window.scrollY,$("#tooltipDictBox").css({top:d,left:l}))}else $("#tooltipDictBox").hide()}),$(document).click(function(e){var t=document.getElementById("tooltipDictBox"),o=document.getElementById("closeBtnEPD");t&&(t.contains(e.target)?o.contains(e.target)&&$("#tooltipDictBox").hide():$("#tooltipDictBox").hide())})}()}]);